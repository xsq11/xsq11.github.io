{
    "version": "https://jsonfeed.org/version/1",
    "title": "胥圣权 • All posts by \"实验报告\" tag",
    "description": "愿你拼命追求的东西，最后都能如你所愿",
    "home_page_url": "https://xsq11.github.io",
    "items": [
        {
            "id": "https://xsq11.github.io/2021/12/31/%E5%AE%9E%E9%AA%8C%E4%B8%80/",
            "url": "https://xsq11.github.io/2021/12/31/%E5%AE%9E%E9%AA%8C%E4%B8%80/",
            "title": "实验一",
            "date_published": "2021-12-31T12:45:48.000Z",
            "content_html": "<h1 id=\"ipconfig\"><a class=\"markdownIt-Anchor\" href=\"#ipconfig\">#</a> ipconfig</h1>\n<div class=\"note info\">\n<p>使用 ipconfig/all 查看自己计算机的网络配置，尽可能明白每行的意思，特别注意 IP 地址、子网掩码 Subnet Mask、网关 Gateway。</p>\n</div>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">无线局域网适配器 WLAN:</span><br><span class=\"line\"></span><br><span class=\"line\">   连接特定的 DNS 后缀 . . . . . . . :</span><br><span class=\"line\">   IPv6 地址 . . . . . . . . . . . . : 2409:8960:1e44:4d78:9da2:1786:a08d:11a5</span><br><span class=\"line\">   临时 IPv6 地址. . . . . . . . . . : 2409:8960:1e44:4d78:41ec:30a:5c76:b6a7</span><br><span class=\"line\">   本地链接 IPv6 地址. . . . . . . . : fe80::9da2:1786:a08d:11a5%13</span><br><span class=\"line\">   IPv4 地址 . . . . . . . . . . . . : 192.168.43.69</span><br><span class=\"line\">   子网掩码  . . . . . . . . . . . . : 255.255.255.0</span><br><span class=\"line\">   默认网关. . . . . . . . . . . . . : fe80::3679:16ff:fee3:ad26%13</span><br><span class=\"line\">                                       192.168.43.1</span><br></pre></td></tr></table></figure>\n<p><code>IP地址</code> 是一种逻辑地地址，用来标识网络中一个个主机，IP 有唯一性，即每台机器的 IP 在全世界是唯一的。 <br>\n <code>DNS</code>  是域名服务器，用来解析域名的（域名与 IP 之间的解析），如果没有这东西，你必须输入网站的 IP 地址，有了 DNS，你就可以直接输入网址。<br>\n <code>子网掩码</code> 是用来判断任意两台计算机的 ip 地址是否属于同一子网络的根据。最为简单的理解就是两台计算机各自的 ip 地址与子网掩码进行 and 运算后，得出的结果是相同的，则说明这两台计算机是处于同一个子网络上的，可以进行直接的通讯。<br>\n <code>网关</code> 实质上是一个网络通向其他网络的 IP 地址。要实现这两个网络之间的通信，则必须通过网关。如果网络 A 中的主机发现数据包的目的主机不在本地网络中，就把数据包转发给它自己的网关，再由网关转发给网络 B 的网关，网络 B 的网关再转发给网络 B 的某个主机。<br>\n <code>MAC(Media Access Control，介质访问控制)地址</code> ，也叫硬件地址，它一定是全球唯一的。在数据通信时，IP 地址负责表示计算机的网络层地址，网络层设备 (如路由器) 根据 IP 地址来进行操作；MAC 地址负责表示计算机的数据链路层地址，数据链路层设备 (如交换机) 根据 MAC 地址来进行操作。IP 和 MAC 地址这种映射关系由 ARP (Address Resolution Protocol，地址解析协议) 协议完成。IP 地址就如同一个职位，而 MAC 地址则好像是去应聘这个职位的人才。</p>\n<h1 id=\"ping\"><a class=\"markdownIt-Anchor\" href=\"#ping\">#</a> ping</h1>\n<div class=\"note info\">\n<p>要测试到某计算机如 重庆交通大学 Web 服务器的连通性，可以使用 ping <span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5jcWp0dS5lZHUuY24=\">www.cqjtu.edu.cn</span> 命令，也可直接使用 IP 地址。<br>\n请掌握使用该命令后屏幕显示的反馈回来信息的意思，如：TTL、时间等。</p>\n</div>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:\\Users\\86138&gt;ping www.cqjtu.edu.cn</span><br><span class=\"line\">正在 Ping www.cqjtu.edu.cn [2001:da8:c801:99::102] 具有 32 字节的数据:</span><br><span class=\"line\">来自 2001:da8:c801:99::102 的回复: 时间=62ms</span><br><span class=\"line\">来自 2001:da8:c801:99::102 的回复: 时间=47ms</span><br><span class=\"line\">来自 2001:da8:c801:99::102 的回复: 时间=47ms</span><br><span class=\"line\">来自 2001:da8:c801:99::102 的回复: 时间=59ms</span><br><span class=\"line\">2001:da8:c801:99::102 的 Ping 统计信息:</span><br><span class=\"line\">    数据包: 已发送 = 4，已接收 = 4，丢失 = 0 (0% 丢失)，</span><br><span class=\"line\">往返行程的估计时间(以毫秒为单位):</span><br><span class=\"line\">    最短 = 47ms，最长 = 62ms，平均 = 53ms</span><br></pre></td></tr></table></figure>\n<h1 id=\"tracert\"><a class=\"markdownIt-Anchor\" href=\"#tracert\">#</a> tracert</h1>\n<div class=\"note info\">\n<p>要了解到某计算机如 <span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5iYWlkdS5jb20=\">www.baidu.com</span> 中间经过了哪些节点（路由器）及其它状态，可使用 tracert <span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5iYWlkdS5jb20=\">www.baidu.com</span> 命令，查看反馈的信息，了解节点的个数。</p>\n</div>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">C:\\Users\\86138&gt;tracert www.baidu.com</span><br><span class=\"line\"></span><br><span class=\"line\">通过最多 30 个跃点跟踪</span><br><span class=\"line\">到 www.a.shifen.com [183.232.231.174] 的路由:</span><br><span class=\"line\"></span><br><span class=\"line\">  1     3 ms     2 ms     2 ms  192.168.43.1</span><br><span class=\"line\">  2     *        *        *     请求超时。</span><br><span class=\"line\">  3     *        *        *     请求超时。</span><br><span class=\"line\">  4     *        *        *     请求超时。</span><br><span class=\"line\">  5     *        *        *     请求超时。</span><br><span class=\"line\">  6    51 ms    26 ms    39 ms  ptr.cq.chinamobile.com [211.139.50.149]</span><br><span class=\"line\">  7    49 ms    25 ms     *     ptr.cq.chinamobile.com [218.207.38.161]</span><br><span class=\"line\">  8    26 ms    39 ms    41 ms  ptr.cq.chinamobile.com [218.207.38.157]</span><br><span class=\"line\">  9    33 ms    33 ms     *     221.183.49.41</span><br><span class=\"line\"> 10     *        *        *     请求超时。</span><br><span class=\"line\"> 11     *        *        *     请求超时。</span><br><span class=\"line\"> 12    84 ms    84 ms    60 ms  120.241.49.214</span><br><span class=\"line\"> 13     *        *        *     请求超时。</span><br><span class=\"line\"> 14    71 ms    55 ms    55 ms  ptr.cq.chinamobile.com [183.232.231.174]</span><br><span class=\"line\"></span><br><span class=\"line\">跟踪完成。</span><br></pre></td></tr></table></figure>\n<div class=\"note info\">\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3BpbmcucGU=\">ping.pe</span> 这个网站可以探测从全球主要的 ISP 到某站点如 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9xaWdlLmlv\">https://qige.io</span> 的线路状态，当然也包括各线路到该主机的路由情况。请使用浏览器访问 <span class=\"exturl\" data-url=\"aHR0cDovL3BpbmcucGUvcWlnZS5pbw==\">http://ping.pe/qige.io</span> 进行了解。</p>\n</div>\n<p><img data-src=\"/assets/qige.png\" alt=\"\"></p>\n<div class=\"note warning\">\n<p>✎ 问题一<br>\n <code>tracert</code>  能告诉我们路径上的节点以及大致的延迟等信息，那么它背后的原理是什么？本问题可结合第二部分的 Wireshark 实验进行验证。</p>\n</div>\n<p>原理是设置 TTL 为 1.2.3…n ，路由器会将死掉的包的信息返回给主机，从而实现显示路径各个结点。</p>\n<div class=\"note warning\">\n<p>✎ 问题二<br>\n在以上两个实作中，如果你留意路径中的节点，你会发现无论是访问百度还是棋歌教学网，路径中的第一跳都是相同的，甚至你应该发现似乎前几个节点都是相同的，你的解释是什么？</p>\n</div>\n<p>因为我们所有的访问数据会送到网关，然后才能访问外网，所以路径中的第一跳都是相同的。有多个网关的情况下，就会出现前几个结点都是相同的</p>\n<div class=\"note warning\">\n<p>✎ 问题三<br>\n在追踪过程中，你可能会看到路径中某些节点显示为 * 号，这是发生了什么？</p>\n</div>\n<p>因为没有应答，所以为 * 号。</p>\n<h1 id=\"arp\"><a class=\"markdownIt-Anchor\" href=\"#arp\">#</a> ARP</h1>\n<div class=\"note info\">\n<p>1、运行 arp -a 命令查看当前的 arp 缓存， 请留意缓存了些什么。<br>\n2、然后 ping 一下你旁边的计算机 IP（注意，需保证该计算机的 IP 没有出现在 arp 缓存中，或者使用 arp -d * 先删除全部缓存），再次查看缓存，你会发现一些改变，请作出解释。<br>\n3、一般而言，arp 缓存里常常会有网关的缓存，并且是动态类型的。<br>\n假设当前网关的 IP 地址是 192.168.0.1，MAC 地址是 5c-d9-98-f1-89-64，请使用 arp -s 192.168.0.1 5c-d9-98-f1-89-64 命令设置其为静态类型的。</p>\n</div>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:\\Users\\86138&gt;arp -a</span><br><span class=\"line\">接口: 192.168.43.69 --- 0xd</span><br><span class=\"line\">  Internet 地址         物理地址              类型</span><br><span class=\"line\">  192.168.43.1          34-79-16-e3-ad-26     动态</span><br><span class=\"line\">  192.168.43.255        ff-ff-ff-ff-ff-ff     静态</span><br><span class=\"line\">  224.0.0.22            01-00-5e-00-00-16     静态</span><br><span class=\"line\">  224.0.0.251           01-00-5e-00-00-fb     静态</span><br><span class=\"line\">  224.0.0.252           01-00-5e-00-00-fc     静态</span><br><span class=\"line\">  239.11.20.1           01-00-5e-0b-14-01     静态</span><br><span class=\"line\">  239.255.255.250       01-00-5e-7f-ff-fa     静态</span><br><span class=\"line\">  255.255.255.255       ff-ff-ff-ff-ff-ff     静态</span><br></pre></td></tr></table></figure>\n<p>再次使用命令 arp -a ，可以发现多了一个地址，且是动态的，这是由于同一局域网下，如果出现新的主机，本机的接口会将新主机的 IP 和物理地址记录在列表中，从而方便下次的访问。</p>\n<div class=\"note warning\">\n<p>✎ 问题<br>\n 1、为何缓存中常常有网关的信息？<br>\n2、我们将网关或其它计算机的 arp 信息设置为静态有什么优缺点？</p>\n</div>\n<p>1：因为在对外传输数据的时候，会将经过的网关信息存储在缓存中，方便下次使用<br>\n 2：可以有效的防治 ARP 欺骗，并且可以免除用户进行身份认证的繁琐操作。</p>\n<h1 id=\"dhcp\"><a class=\"markdownIt-Anchor\" href=\"#dhcp\">#</a> DHCP</h1>\n<div class=\"note warning\">\n<p>一般地，我们自动获取的网络配置信息包括：IP 地址、子网掩码、网关 IP 以及 DNS 服务器 IP 等。使用 ipconfig/release 命令释放自动获取的网络配置，并用 ipconfig/renew 命令重新获取，了解 DHCP 工作过程和原理。</p>\n</div>\n<p><code>ipconfig/release</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">无线局域网适配器 WLAN:</span><br><span class=\"line\"></span><br><span class=\"line\">   连接特定的 DNS 后缀 . . . . . . . :</span><br><span class=\"line\">   IPv6 地址 . . . . . . . . . . . . : 2409:8960:1e44:4d78:9da2:1786:a08d:11a5</span><br><span class=\"line\">   临时 IPv6 地址. . . . . . . . . . : 2409:8960:1e44:4d78:41ec:30a:5c76:b6a7</span><br><span class=\"line\">   本地链接 IPv6 地址. . . . . . . . : fe80::9da2:1786:a08d:11a5%13</span><br><span class=\"line\">   默认网关. . . . . . . . . . . . . : fe80::3679:16ff:fee3:ad26%13</span><br></pre></td></tr></table></figure>\n<p><code>ipconfig/renew</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">无线局域网适配器 WLAN:</span><br><span class=\"line\"></span><br><span class=\"line\">   连接特定的 DNS 后缀 . . . . . . . :</span><br><span class=\"line\">   IPv6 地址 . . . . . . . . . . . . : 2409:8960:1e44:4d78:9da2:1786:a08d:11a5</span><br><span class=\"line\">   临时 IPv6 地址. . . . . . . . . . : 2409:8960:1e44:4d78:41ec:30a:5c76:b6a7</span><br><span class=\"line\">   本地链接 IPv6 地址. . . . . . . . : fe80::9da2:1786:a08d:11a5%13</span><br><span class=\"line\">   IPv4 地址 . . . . . . . . . . . . : 192.168.43.69</span><br><span class=\"line\">   子网掩码  . . . . . . . . . . . . : 255.255.255.0</span><br><span class=\"line\">   默认网关. . . . . . . . . . . . . : fe80::3679:16ff:fee3:ad26%13</span><br><span class=\"line\">                                       192.168.43.1</span><br></pre></td></tr></table></figure>\n<div class=\"note warning\">\n<p>✎ 问题<br>\n在 Windows 系统下，如果由于某种原因计算机不能获取 DHCP 服务器的配置数据，那么 Windows 将会根据某种算法自动配置为 169.254.x.x 这样的 IP 地址。显然，这样的 IP 以及相关的配置信息是不能让我们真正接入 Internet 的，为什么？既然不能接入 Internet，那么 Winodws 系统采用这样的方案有什么意义？</p>\n</div>\n<p>这个不太清楚啊，可能是因为虽然不能接入 Internet，但是可以和其他主机通信吧。</p>\n<h1 id=\"netstat\"><a class=\"markdownIt-Anchor\" href=\"#netstat\">#</a> netstat</h1>\n<div class=\"note info\">\n<p>Windows 系统将一些常用的端口与服务记录在 C:\\Windows\\System32\\drivers\\etc\\services 文件中，请查看该文件了解常用的端口号分配。</p>\n</div>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo                7/tcp</span><br><span class=\"line\">echo                7/udp</span><br><span class=\"line\">discard             9/tcp    sink null</span><br><span class=\"line\">discard             9/udp    sink null</span><br><span class=\"line\">systat             11/tcp    users                  #Active users</span><br><span class=\"line\">systat             11/udp    users                  #Active users</span><br><span class=\"line\">daytime            13/tcp</span><br><span class=\"line\">daytime            13/udp</span><br><span class=\"line\">qotd               17/tcp    quote                  #Quote of the day</span><br><span class=\"line\">qotd               17/udp    quote                  #Quote of the day</span><br><span class=\"line\">chargen            19/tcp    ttytst source          #Character generator</span><br><span class=\"line\">chargen            19/udp    ttytst source          #Character generator</span><br><span class=\"line\">ftp-data           20/tcp                           #FTP, data</span><br><span class=\"line\">ftp                21/tcp                           #FTP. control</span><br><span class=\"line\">ssh                22/tcp                           #SSH Remote Login Protocol</span><br><span class=\"line\">telnet             23/tcp</span><br><span class=\"line\">smtp               25/tcp    mail                   #Simple Mail Transfer Protocol</span><br><span class=\"line\">time               37/tcp    timserver</span><br><span class=\"line\">time               37/udp    timserver</span><br><span class=\"line\">rlp                39/udp    resource               #Resource Location Protocol</span><br></pre></td></tr></table></figure>\n<div class=\"note info\">\n<p>使用 netstat -an 命令，查看计算机当前的网络连接状况。更多的 netstat 命令选项，可参考上面链接 4 和 5 。</p>\n</div>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:\\Users\\86138&gt;netstat -an</span><br><span class=\"line\"></span><br><span class=\"line\">活动连接</span><br><span class=\"line\"></span><br><span class=\"line\">  协议  本地地址          外部地址        状态</span><br><span class=\"line\">  TCP    0.0.0.0:135            0.0.0.0:0              LISTENING</span><br><span class=\"line\">  TCP    0.0.0.0:443            0.0.0.0:0              LISTENING</span><br><span class=\"line\">  TCP    0.0.0.0:445            0.0.0.0:0              LISTENING</span><br><span class=\"line\">  TCP    0.0.0.0:902            0.0.0.0:0              LISTENING</span><br><span class=\"line\">  TCP    0.0.0.0:912            0.0.0.0:0              LISTENING</span><br><span class=\"line\">  TCP    0.0.0.0:3306           0.0.0.0:0              LISTENING</span><br><span class=\"line\">  TCP    0.0.0.0:4000           0.0.0.0:0              LISTENING</span><br><span class=\"line\">  TCP    0.0.0.0:5040           0.0.0.0:0              LISTENING</span><br><span class=\"line\">  TCP    0.0.0.0:5357           0.0.0.0:0              LISTENING</span><br><span class=\"line\">  TCP    0.0.0.0:21832          0.0.0.0:0              LISTENING</span><br><span class=\"line\">  TCP    0.0.0.0:33060          0.0.0.0:0              LISTENING</span><br><span class=\"line\">  TCP    0.0.0.0:49664          0.0.0.0:0              LISTENING</span><br><span class=\"line\">  TCP    0.0.0.0:49665          0.0.0.0:0              LISTENING</span><br><span class=\"line\">  TCP    0.0.0.0:49666          0.0.0.0:0              LISTENING</span><br><span class=\"line\">  TCP    0.0.0.0:49667          0.0.0.0:0              LISTENING</span><br><span class=\"line\">  TCP    0.0.0.0:49668          0.0.0.0:0              LISTENING</span><br><span class=\"line\">  TCP    0.0.0.0:49669          0.0.0.0:0              LISTENING</span><br></pre></td></tr></table></figure>\n<h1 id=\"dns\"><a class=\"markdownIt-Anchor\" href=\"#dns\">#</a> DNS</h1>\n<div class=\"note info\">\n<p>Windows 系统将一些固定的 / 静态的 DNS 信息记录在 C:\\Windows\\System32\\drivers\\etc\\hosts 文件中，如我们常用的 localhost 就对应 127.0.0.1 。请查看该文件看看有什么记录在该文件中。</p>\n</div>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">This file contains the mappings of IP addresses to host names. Each</span><br><span class=\"line\">entry should be kept on an individual line. The IP address should</span><br><span class=\"line\">be placed in the first column followed by the corresponding host name.</span><br><span class=\"line\">The IP address and the host name should be separated by at least one</span><br><span class=\"line\">space.</span><br><span class=\"line\"></span><br><span class=\"line\">Additionally, comments (such as these) may be inserted on individual</span><br><span class=\"line\">lines or following the machine name denoted by a &#x27;#&#x27; symbol.</span><br><span class=\"line\"></span><br><span class=\"line\">For example:</span><br><span class=\"line\"></span><br><span class=\"line\">     102.54.94.97     rhino.acme.com          # source server</span><br><span class=\"line\">      38.25.63.10     x.acme.com              # x client host</span><br><span class=\"line\"></span><br><span class=\"line\">localhost name resolution is handled within DNS itself.</span><br><span class=\"line\">127.0.0.1       localhost</span><br><span class=\"line\">::1             localhost</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<div class=\"note info\">\n<p>解析过的 DNS 记录将会被缓存，以利于加快解析速度。请使用 ipconfig /displaydns 命令查看。我们也可以使用 ipconfig /flushdns 命令来清除所有的 DNS 缓存</p>\n</div>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">www.cqjtu.edu.cn</span><br><span class=\"line\">   ----------------------------------------</span><br><span class=\"line\">   记录名称. . . . . . . : www.cqjtu.edu.cn</span><br><span class=\"line\">   记录类型. . . . . . . : 28</span><br><span class=\"line\">   生存时间. . . . . . . : 1113</span><br><span class=\"line\">   数据长度. . . . . . . : 16</span><br><span class=\"line\">   部分. . . . . . . . . : 答案</span><br><span class=\"line\">   AAAA 记录 . . . . . . : 2001:da8:c801:99::102</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">   www.cqjtu.edu.cn</span><br><span class=\"line\">   ----------------------------------------</span><br><span class=\"line\">   记录名称. . . . . . . : www.cqjtu.edu.cn</span><br><span class=\"line\">   记录类型. . . . . . . : 1</span><br><span class=\"line\">   生存时间. . . . . . . : 2112</span><br><span class=\"line\">   数据长度. . . . . . . : 4</span><br><span class=\"line\">   部分. . . . . . . . . : 答案</span><br><span class=\"line\">   A (主机)记录  . . . . : 218.70.34.236</span><br></pre></td></tr></table></figure>\n<div class=\"note info\">\n<p>使用 nslookup <span class=\"exturl\" data-url=\"aHR0cDovL3FpZ2UuaW8=\">qige.io</span> 命令，将使用默认的 DNS 服务器查询该域名。当然你也可以指定使用 CloudFlare（1.1.1.1）或 Google（8.8.8.8） 的全球 DNS 服务器来解析，如：nslookup <span class=\"exturl\" data-url=\"aHR0cDovL3FpZ2UuaW8=\">qige.io</span> 8.8.8.8，当然，由于你懂的原因，这不一定会得到正确的答案。</p>\n</div>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:\\Users\\86138&gt;nslookup qige.io 8.8.8.8</span><br><span class=\"line\">服务器:  dns.google</span><br><span class=\"line\">Address:  8.8.8.8</span><br><span class=\"line\"></span><br><span class=\"line\">非权威应答:</span><br><span class=\"line\">名称:    qige.io</span><br><span class=\"line\">Addresses:  2606:4700:3032::ac43:8f35</span><br><span class=\"line\">          2606:4700:3033::6815:272e</span><br><span class=\"line\">          104.21.39.46</span><br><span class=\"line\">          172.67.143.53</span><br></pre></td></tr></table></figure>\n<h1 id=\"cache\"><a class=\"markdownIt-Anchor\" href=\"#cache\">#</a> cache</h1>\n<div class=\"note info\">\n<p>打开 Chrome 或 Firefox 浏览器，访问  <code>https://qige.io</code>  ，接下来敲  <code>F12</code>  键 或  <code>Ctrl + Shift + I</code>  组合键打开开发者工具，选择  <code>Network</code>  面板后刷新页面，你会在开发者工具底部看到加载该页面花费的时间。请进一步查看哪些文件被 cache 了，哪些没有。</p>\n</div>\n<p><img data-src=\"/assets/1.1.png\" alt=\"\"><br>\n加载页面花费了 6.15 s；感觉请求了很多东西，主要是静态资源，像 css、js 等。</p>\n<div class=\"note info\">\n<p>接下来仍在 Network 面板，选择 Disable cache 选项框，表明当前不使用 cache，页面数据全部来自于 Internet，刷新页面，再次在开发者工具底部查看加载该页面花费的时间。你可比对与有 cache 时的加载速度差异。</p>\n</div>\n<p><img data-src=\"/assets/1.2.png\" alt=\"\"><br>\n加载页面花费了 12.5 s, 快了将近一倍！！</p>\n",
            "tags": [
                "实验报告"
            ]
        },
        {
            "id": "https://xsq11.github.io/2021/12/31/%E5%AE%9E%E9%AA%8C%E4%BA%8C/",
            "url": "https://xsq11.github.io/2021/12/31/%E5%AE%9E%E9%AA%8C%E4%BA%8C/",
            "title": "实验二",
            "date_published": "2021-12-31T12:45:48.000Z",
            "content_html": "<h1 id=\"数据链路层\"><a class=\"markdownIt-Anchor\" href=\"#数据链路层\">#</a> 数据链路层</h1>\n<div class=\"note info\">\n<p>使用 Wireshark 任意进行抓包，熟悉 Ethernet 帧的结构，如：目的 MAC、源 MAC、类型、字段等。</p>\n</div>\n<p><img data-src=\"/assets/1.3.png\" alt=\"\"></p>\n<div class=\"note warning\">\n<p>✎ 问题<br>\n你会发现 Wireshark 展现给我们的帧中没有校验字段，请了解一下原因。</p>\n</div>\n<p>Wireshark 抓取的包会自动丢弃掉校验字段<br>\n <code>了解子网内/外通信时的 MAC 地址</code></p>\n<div class=\"note info\">\n<pre><code>1、ping 你旁边的计算机（同一子网），同时用 Wireshark 抓这些包（可使用 icmp 关键字进行过滤以利于分析），记录一下发出帧的目的 MAC 地址以及返回帧的源 MAC 地址是多少？这个 MAC 地址是谁的？\n2、然后 ping qige.io （或者本子网外的主机都可以），同时用 Wireshark 抓这些包（可 icmp 过滤），记录一下发出帧的目的 MAC 地址以及返回帧的源 MAC 地址是多少？这个 MAC 地址是谁的？\n3、再次 ping www.cqjtu.edu.cn （或者本子网外的主机都可以），同时用 Wireshark 抓这些包（可 icmp 过滤），记录一下发出帧的目的 MAC 地址以及返回帧的源 MAC 地址又是多少？这个 MAC 地址又是谁的？\n</code></pre>\n</div>\n<p><img data-src=\"/assets/1.4.png\" alt=\"\"><br>\n<img data-src=\"/assets/1.5.png\" alt=\"\"><br>\n图中的目的 mac 是我本机，源 mac 可能是我的网关的 mac，因为我 ping 的是百度。访问本子网的计算机时，目的 MAC 就是该主机的。<br>\n访问非本子网的计算机时，目的 MAC 是网关的。因为访问外网的时候，目的 mac 地址都是网关，然后通过网关传给外面。出了网关后通过 IP 地址进行查找；接收到非子网的计算机返回的数据也都是先到网关，网关再根据目的 mac 送到本机。</p>\n<h1 id=\"网络层\"><a class=\"markdownIt-Anchor\" href=\"#网络层\">#</a> 网络层</h1>\n<p><code>ip包格式</code>  (网图)<br>\n<img data-src=\"https://img-blog.csdnimg.cn/20201209203056496.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NzajkyNTMxOQ==,size_16,color_FFFFFF,t_70\" alt=\"\"></p>\n<div class=\"note warning\">\n<p>✎ 问题<br>\n为提高效率，我们应该让 IP 的头部尽可能的精简。但在如此珍贵的 IP 头部你会发现既有头部长度字段，也有总长度字段。请问为什么？</p>\n</div>\n<p>因为有了头部长度和总长上层就可以提取到 ip 包的数据内容，如果只有一个的话就办不到。</p>\n<div class=\"note info\">\n<p>根据规定，一个 IP 包最大可以有 64K 字节。但由于 Ethernet 帧的限制，当 IP 包的数据超过 1500 字节时就会被发送方的数据链路层分段，然后在接收方的网络层重组。<br>\n缺省的，ping 命令只会向对方发送 32 个字节的数据。我们可以使用 ping 202.202.240.16 -l 2000 命令指定要发送的数据长度。此时使用 Wireshark 抓包（用 ip.addr == 202.202.240.16 进行过滤），了解 IP 包如何进行分段，如：分段标志、偏移量以及每个包的大小等</p>\n</div>\n<p><img data-src=\"/assets/1.6.png\" alt=\"\"><br>\n从图中可以看到包的总长为 1500，More fragments 为 1，表示还有其他片段。</p>\n<h1 id=\"传输层\"><a class=\"markdownIt-Anchor\" href=\"#传输层\">#</a> 传输层</h1>\n<div class=\"note info\">\n<pre><code>1、用 Wireshark 任意抓包（可用 tcp 过滤），熟悉 TCP 段的结构，如：源端口、目的端口、序列号、确认号、各种标志位等字段。\n2、用 Wireshark 任意抓包（可用 udp 过滤），熟悉 UDP 段的结构，如：源端口、目的端口、长度等。\n</code></pre>\n</div>\n<p><code>TCP包</code>  (网图)<br>\n<img data-src=\"/assets/1.7.png\" alt=\"\"><br>\n <code>UDP包</code>  (网图)<br>\n<img data-src=\"/assets/1.8.png\" alt=\"\"></p>\n<div class=\"note warning\">\n<p>✎ 问题<br>\n由上大家可以看到 UDP 的头部比 TCP 简单得多，但两者都有源和目的端口号。请问源和目的端口号用来干什么？</p>\n</div>\n<p>源端口和目的端口是用来确认某一个应用程序，也就是进程间通信。</p>\n<div class=\"note info\">\n<pre><code>1、打开浏览器访问 qige.io 网站，用 Wireshark 抓包（可用 tcp 过滤后再使用加上 Follow TCP Stream），不要立即停止 Wireshark 捕获，待页面显示完毕后再多等一段时间使得能够捕获释放连接的包。\n2、请在你捕获的包中找到三次握手建立连接的包，并说明为何它们是用于建立连接的，有什么特征。\n3、请在你捕获的包中找到四次挥手释放连接的包，并说明为何它们是用于释放连接的，有什么特征。\n</code></pre>\n</div>\n<p><code>建立连接，三次握手</code> <br>\n<img data-src=\"/assets/1.9.png\" alt=\"\"><br>\n我先向 <code>qige.io</code>  发送请求 SYN=1。然后 <code>qige.io</code>  向我回复收到 ACK=1，再向我发送请求 SYN=1。最后我回复收到 ACK=1。所以前两次握手时 SYN=1 最后一次为 0；前两次握手时 ACK=0, 最后一次为 1；<br>\n <code>释放连接，四次挥手</code> <br>\n<img data-src=\"/assets/1.10.png\" alt=\"\"><br>\n我向 <code>qige.io</code>  发送释放请求 FIN=1，我不再向 <code>qige.io</code>  发送数据，但可以接受。 <code>qige.io</code>  收到后回复确认 ACK=1 并进入半关闭。等 <code>qige.io</code>  发完数据后给我发送释放请求 FIN=1,ACK=1。我回复 ACK=1。<br>\n去掉 Follow TCP Stream，即不跟踪一个 TCP 流，你可能会看到访问 <span class=\"exturl\" data-url=\"aHR0cDovL3FpZ2UuaW8=\">qige.io</span> 时我们建立的连接有多个，这样相当于开辟了多个传输通道，加快传输数据的速度。</p>\n<h1 id=\"应用层\"><a class=\"markdownIt-Anchor\" href=\"#应用层\">#</a> 应用层</h1>\n<div class=\"note info\">\n<pre><code>1、先使用 ipconfig /flushdns 命令清除缓存，再使用 nslookup qige.io 命令进行解析，同时用 Wireshark 任意抓包（可用 dns 过滤）。\n2、你应该可以看到当前计算机使用 UDP，向默认的 DNS 服务器的 53 号端口发出了查询请求，而 DNS 服务器的 53 号端口返回了结果。\n3、可了解一下 DNS 查询和应答的相关字段的含义\n</code></pre>\n</div>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:\\Users\\86138&gt;nslookup qige.io</span><br><span class=\"line\">服务器:  UnKnown</span><br><span class=\"line\">Address:  192.168.43.1</span><br><span class=\"line\">非权威应答:</span><br><span class=\"line\">名称:    qige.io</span><br><span class=\"line\">Addresses:  2606:4700:3032::ac43:8f35</span><br><span class=\"line\">          2606:4700:3033::6815:272e</span><br><span class=\"line\">          104.21.39.46</span><br><span class=\"line\">          172.67.143.53</span><br></pre></td></tr></table></figure>\n<div class=\"note warning\">\n<p>问题？<br>\n你可能会发现对同一个站点，我们发出的 DNS 解析请求不止一个，思考一下是什么原因？</p>\n</div>\n<p>DNS 不止一个的原因可能是 DNS 解析过程是先从浏览器的 DNS 缓存中检查是否有这个网址的映射关系，如果有，就返回 IP，完成域名解析；如果没有，操作系统会先检查自己本地的 hosts 文件是否有这个网址的映射关系，如果有，就返回 IP，完成域名解析；如果还没有，电脑就要向本地 DNS 服务器发起请求查询域名；本地 DNS 服务器拿到请求后，先检查一下自己的缓存中有没有这个地址，有的话直接返回；没有的话本地 DNS 服务器会从配置文件中读取根 DNS 服务器的地址，然后向其中一台发起请求；直到获得对应的 IP 为止。</p>\n<div class=\"note info\">\n<p>打开浏览器访问 <span class=\"exturl\" data-url=\"aHR0cDovL3FpZ2UuaW8=\">qige.io</span> 网站，用 Wireshark 抓包（可用 http 过滤再加上 Follow TCP Stream），不要立即停止 Wireshark 捕获，待页面显示完毕后再多等一段时间以将释放连接的包捕获。</p>\n</div>\n<p><img data-src=\"/assets/1.11.png\" alt=\"\"><br>\n200：交易成功；<br>\n304：客户端已经执行了 GET，但文件未变化；<br>\n404：没有发现文件、查询或 URl；<br>\n如果是用浏览器刷新的，那么浏览器不会去判断 max-age 了，直接去服务器拿，如果服务器判断资源没变过，则会返回 304，让浏览器读本地缓存即可，而返回 200 是指成功从服务器拿到了资源。</p>\n",
            "tags": [
                "实验报告"
            ]
        }
    ]
}